
@{
    Layout = null;
}
@model List<ProductComment>


@foreach (var item in Model)
{

    <div id="div1">
        <table class="table table-striped table-bordered">
            <tbody>
                <tr>
                    <td style="width: 50%;"><strong><span>@($"{item.User.FirstName} {item.User.LastName}")</span></strong></td>
                    <td class="text-right"><span>@item.ShamsiDate</span></td>
                </tr>
                <tr>
                    <td colspan="2">
                        <pre>@item.Comment</pre>
                        <div>
                            <div class="col-sm-2">
                                <input onclick="return false;" type="checkbox" checked="@item.DisAgree" /><h style="font-size:medium">مخالف</h>
                            </div>
                            <div class="col-sm-2">
                                @inject UserManager<ApplicationUser> UserManager
                                @if (User.Identity.IsAuthenticated)
                                {


                                    @if ((await UserManager.FindByNameAsync(User.Identity.Name)).Id == item.UserId)
                                    {
                                        <form asp-action="DeletComment" asp-controller="Product" asp-route-CommentId="@item.Id " data-ajax="true" data-ajax-complete="d1">

                                            <div style="text-align:right" class="col-sm-1">
                                                <button id="BtnRemoveComment" ProductId="@item.ProductId" type="submit" data-toggle="tooltip" title="" class="btn btn-danger" onclick="" data-original-title="حذف"><i class="fa fa-times-circle"></i></button>
                                            </div>
                                        </form>
                                    }
                                }
                            </div>
                            <div class="container col-sm-8 ">
                                <h style="font-size:medium">@($"{(ViewData["CClike"] as List<AnonymosType1>).SingleOrDefault(x => x.PCId == item.Id).Num}")</h>

                                @if ((ViewData["CClike"] as List<AnonymosType1>).SingleOrDefault(x => x.PCId == item.Id).UserId != null)
                                {


                                    @*<input checked="checked" ProductCommentId="@(item.Id)" style="margin-right:20px" type="checkbox" name="cbG06" id="CheckBoxgggggggggg" class=" container-fluid">*@
                                    <input checked="checked" ProductCommentId="@(item.Id)" style="margin-right:20px" type="checkbox" name="cbG06" id="@(item.Id)" class="css-checkbox container-fluid"><label for="@(item.Id)" class="css-label cb0"></label>


                                }
                                else
                                {
                                    <input ProductCommentId="@(item.Id)" style="margin-right:20px" type="checkbox" name="cbG06" id="@(item.Id)" class="css-checkbox container-fluid"><label for="@(item.Id)" class="css-label cb0"></label>

                                }
                            </div>
                        </div>
                        @*<div class="rating"> <span class="fa fa-stack"><i class="fa fa-star fa-stack-2x"></i><i class="fa fa-star-o fa-stack-2x"></i></span> <span class="fa fa-stack"><i class="fa fa-star fa-stack-2x"></i><i class="fa fa-star-o fa-stack-2x"></i></span> <span class="fa fa-stack"><i class="fa fa-star fa-stack-2x"></i><i class="fa fa-star-o fa-stack-2x"></i></span> <span class="fa fa-stack"><i class="fa fa-star fa-stack-2x"></i><i class="fa fa-star-o fa-stack-2x"></i></span> <span class="fa fa-stack"><i class="fa fa-star fa-stack-2x"></i><i class="fa fa-star-o fa-stack-2x"></i></span> </div>*@
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

}
<script>
    $(function () {
        $('td').on('change','input.container-fluid', function () {

            var CId = $(this).attr('ProductCommentId')
            var status = $(this).prop('checked')
            var h = $(this).parent('div').children('h')
            $.post('/product/CommentLike', { ProductCommentid: CId, Status: status }, function (x) {
                h.html(`${x.totallike}`)
            })
        })
    })
        d1 = function (x) {
            var i = x.responseText
            var PI = $(BtnRemoveComment).attr('ProductId')
            if (i == "t") {
                //$('.table table-striped table-bordered').remove()
                $.post('/Product/ProductCom', { ProductId: PI }, function (value) {
                    $(div1).html(value)
                })

            }
        }
</script>